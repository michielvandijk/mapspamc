<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Model setup â€¢ mapspamc</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Model setup">
<meta property="og:description" content="mapspamc">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mapspamc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/installation.html">Installation</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Background</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/crop_distribution_maps.html">Crop distribution maps</a>
        </li>
        <li>
          <a href="../articles/model_structure.html">Model structure</a>
        </li>
        <li>
          <a href="../articles/data.html">Input data</a>
        </li>
        <li>
          <a href="../articles/appendix.html">Appendix</a>
        </li>
      </ul>
</li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Preparation</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/collect_input_data.html">Input data collection</a>
        </li>
        <li>
          <a href="../articles/template.html">Download template</a>
        </li>
      </ul>
</li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Run SPAMc</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/setup_model.html">1. Model setup</a>
        </li>
        <li>
          <a href="../articles/process_subnat_stat.html">2. Process subnational statistics</a>
        </li>
        <li>
          <a href="../articles/process_spatial_data.html">3. Process spatial data</a>
        </li>
        <li>
          <a href="../articles/run_spamc.html">4. Run model</a>
        </li>
        <li>
          <a href="../articles/post_process.html">5. Post-processing</a>
        </li>
      </ul>
</li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/iiasa/mapspamc">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Model setup</h1>
            
      
      
      <div class="hidden name"><code>setup_model.Rmd</code></div>

    </div>

    
    
<p>To setup SPAMc two steps need to be taken (the order is important!). It is assumed that all required software is already installed and working (see <a href="software.html">software and hardware</a>). As <a href="template.html">mentioned</a>, it is by far the easiest to install the template in an RStudio project first and then start to work on your own country SPAMc version as all the steps discussed from now on are already pre-coded in the template.</p>
<div id="create-spamc-folder-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#create-spamc-folder-structure" class="anchor"></a>Create SPAMc folder structure</h2>
<p><code>mapspamc</code> includes a function to create all necessary folders <code><a href="../reference/create_spam_folders.html">create_spam_folders()</a></code>. The only input it requires is a path on your harddisk. We do not recommend using a server to store the model as the potential increase in file access time might seriously affect the time it takes to process some of the spatial datasets which can be very large. Note that it is perfectly fine to store large <em>raw data</em> files on a server (see below).</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="co"># Load mapspamc</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"mapspamc"</span>)

<span class="co"># Set the folder where the model will be stored</span>
<span class="co"># Note that R uses forward slashes even in Windows!!</span>
<span class="no">spamc_path</span> <span class="kw">&lt;-</span> <span class="st">"C:/Users/dijk158/Dropbox/mapspamc_mwi"</span>

<span class="co"># Create SPAMc folder structure in the spamc_path</span>
<span class="fu"><a href="../reference/create_spam_folders.html">create_spam_folders</a></span>(<span class="no">spamc_path</span>)</pre></body></html></div>
</div>
<div id="set-model-parameters-and-location-of-files" class="section level2">
<h2 class="hasAnchor">
<a href="#set-model-parameters-and-location-of-files" class="anchor"></a>Set model parameters and location of files</h2>
<p>Nearly all functions in <code>mapspamc</code> need input on (1) key parameters that determine the design of the model and how will be solved and (2) the location of raw and intermediate data, which will be processed (see <a href="model_structure.html">model structure</a>. Both pieces of information are bundled and stored by the function <code><a href="../reference/set_spamc_par.html">set_spamc_par()</a></code> in a <code>spamc_par</code> object.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="co"># Set SPAMc parameters</span>
<span class="no">par</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/set_spamc_par.html">set_spamc_par</a></span>(<span class="kw">spamc_path</span> <span class="kw">=</span> <span class="no">spamc_path</span>,
 <span class="kw">iso3c_sel</span> <span class="kw">=</span> <span class="st">"MWI"</span>,
 <span class="kw">year_sel</span> <span class="kw">=</span> <span class="fl">2010</span>,
 <span class="kw">grid_sel</span> <span class="kw">=</span> <span class="st">"5min"</span>,
 <span class="kw">adm_sel</span> <span class="kw">=</span> <span class="fl">1</span>,
 <span class="kw">solve_sel</span> <span class="kw">=</span> <span class="fl">0</span>,
 <span class="kw">model_sel</span> <span class="kw">=</span> <span class="st">"max_score"</span>)

<span class="co"># check class</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">par</span>)
<span class="co">#&gt; [1] "spamc_par"</span>

<span class="co"># Show parameters</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">par</span>)
<span class="co">#&gt; iso3c:  MWI </span>
<span class="co">#&gt; year:  2010 </span>
<span class="co">#&gt; resolution:  5min </span>
<span class="co">#&gt; adm level:  1 </span>
<span class="co">#&gt; solve level:  0 </span>
<span class="co">#&gt; model:  max_score </span>
<span class="co">#&gt; spam path:  C:/Users/dijk158/Dropbox/mapspamc_mwi </span>
<span class="co">#&gt; raw data path:  C:/Users/dijk158/Dropbox/mapspamc_mwi/raw_data </span>
<span class="co">#&gt; processed data:  C:/Users/dijk158/Dropbox/mapspamc_mwi/processed_data </span>
<span class="co">#&gt; parameter path:  C:/Users/dijk158/Dropbox/mapspamc_mwi/parameters </span>
<span class="co">#&gt; country name:  Malawi </span>
<span class="co">#&gt; iso3n:  454 </span>
<span class="co">#&gt; fao code:  130 </span>
<span class="co">#&gt; continent:</span></pre></body></html></div>
<p>This object need to be saved in the <code>parameters</code> folder that was created together with all the other folders when running <code>create_spam_folders</code>. Elements in a <code>spamc_par</code> object class can be extracted by using the dollar sign ($). This feature is used to save <code>par</code> the temporary object of class <code>spamc_par</code> into the relevant folder.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="co"># Save </span>
<span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span>(<span class="no">par</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="no">par</span>$<span class="no">spamc_path</span>, <span class="st">"parameters/spamc_par.rds"</span>))</pre></body></html></div>
<p>That is all it takes to set up the SPAMc model! The next step is processing the <a href="process_subnat_stat.html">raw subnational statistics</a> and <a href="process_spatial_data.html">spatial data</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Michiel Van Dijk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
